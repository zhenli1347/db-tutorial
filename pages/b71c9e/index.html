<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>sql-cheat-sheet | DB-TUTORIAL</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/db-tutorial/img/favicon.ico">
    <meta name="description" content="☕ db-tutorial 是一个数据库教程。">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/db-tutorial/assets/css/0.styles.5dc2cb3f.css" as="style"><link rel="preload" href="/db-tutorial/assets/js/app.1598b197.js" as="script"><link rel="preload" href="/db-tutorial/assets/js/2.cc645ea8.js" as="script"><link rel="preload" href="/db-tutorial/assets/js/13.4aa0bc50.js" as="script"><link rel="prefetch" href="/db-tutorial/assets/js/10.67ceec29.js"><link rel="prefetch" href="/db-tutorial/assets/js/11.917853ce.js"><link rel="prefetch" href="/db-tutorial/assets/js/12.3c8f3021.js"><link rel="prefetch" href="/db-tutorial/assets/js/14.8a375258.js"><link rel="prefetch" href="/db-tutorial/assets/js/15.edbef757.js"><link rel="prefetch" href="/db-tutorial/assets/js/16.fa4cea11.js"><link rel="prefetch" href="/db-tutorial/assets/js/17.b27d12d2.js"><link rel="prefetch" href="/db-tutorial/assets/js/18.8dbef247.js"><link rel="prefetch" href="/db-tutorial/assets/js/19.16d06c34.js"><link rel="prefetch" href="/db-tutorial/assets/js/20.349782f5.js"><link rel="prefetch" href="/db-tutorial/assets/js/21.0c4cb722.js"><link rel="prefetch" href="/db-tutorial/assets/js/22.08afd969.js"><link rel="prefetch" href="/db-tutorial/assets/js/23.f6078302.js"><link rel="prefetch" href="/db-tutorial/assets/js/24.2c37bceb.js"><link rel="prefetch" href="/db-tutorial/assets/js/25.612350a3.js"><link rel="prefetch" href="/db-tutorial/assets/js/26.2ce86b41.js"><link rel="prefetch" href="/db-tutorial/assets/js/27.a0af278e.js"><link rel="prefetch" href="/db-tutorial/assets/js/28.e76641c1.js"><link rel="prefetch" href="/db-tutorial/assets/js/29.16bcbce6.js"><link rel="prefetch" href="/db-tutorial/assets/js/3.07f08211.js"><link rel="prefetch" href="/db-tutorial/assets/js/30.5afae00a.js"><link rel="prefetch" href="/db-tutorial/assets/js/31.ff50dd9e.js"><link rel="prefetch" href="/db-tutorial/assets/js/32.736e210d.js"><link rel="prefetch" href="/db-tutorial/assets/js/33.024aa2b1.js"><link rel="prefetch" href="/db-tutorial/assets/js/34.347dc5ce.js"><link rel="prefetch" href="/db-tutorial/assets/js/35.4ed56603.js"><link rel="prefetch" href="/db-tutorial/assets/js/36.b279277d.js"><link rel="prefetch" href="/db-tutorial/assets/js/37.13f1b7b5.js"><link rel="prefetch" href="/db-tutorial/assets/js/38.61897c23.js"><link rel="prefetch" href="/db-tutorial/assets/js/39.2852a032.js"><link rel="prefetch" href="/db-tutorial/assets/js/4.9edd854b.js"><link rel="prefetch" href="/db-tutorial/assets/js/40.aea83b8f.js"><link rel="prefetch" href="/db-tutorial/assets/js/41.74c5f6d3.js"><link rel="prefetch" href="/db-tutorial/assets/js/42.4fb8ac6e.js"><link rel="prefetch" href="/db-tutorial/assets/js/43.78dbfcb5.js"><link rel="prefetch" href="/db-tutorial/assets/js/44.2883f73e.js"><link rel="prefetch" href="/db-tutorial/assets/js/45.c764f565.js"><link rel="prefetch" href="/db-tutorial/assets/js/46.627a475d.js"><link rel="prefetch" href="/db-tutorial/assets/js/47.8017a53d.js"><link rel="prefetch" href="/db-tutorial/assets/js/48.9e2f9da9.js"><link rel="prefetch" href="/db-tutorial/assets/js/49.9c5fec27.js"><link rel="prefetch" href="/db-tutorial/assets/js/5.3850a653.js"><link rel="prefetch" href="/db-tutorial/assets/js/50.dc175bf2.js"><link rel="prefetch" href="/db-tutorial/assets/js/51.98a34fca.js"><link rel="prefetch" href="/db-tutorial/assets/js/52.f06a8d1c.js"><link rel="prefetch" href="/db-tutorial/assets/js/53.b3848a77.js"><link rel="prefetch" href="/db-tutorial/assets/js/54.fe0c9cd5.js"><link rel="prefetch" href="/db-tutorial/assets/js/55.1116689c.js"><link rel="prefetch" href="/db-tutorial/assets/js/56.77e96777.js"><link rel="prefetch" href="/db-tutorial/assets/js/57.261e7cab.js"><link rel="prefetch" href="/db-tutorial/assets/js/58.0aa67c7c.js"><link rel="prefetch" href="/db-tutorial/assets/js/59.7712af8f.js"><link rel="prefetch" href="/db-tutorial/assets/js/6.ec598f68.js"><link rel="prefetch" href="/db-tutorial/assets/js/60.b1e26e7c.js"><link rel="prefetch" href="/db-tutorial/assets/js/61.8eec515e.js"><link rel="prefetch" href="/db-tutorial/assets/js/62.95c5ace4.js"><link rel="prefetch" href="/db-tutorial/assets/js/63.947996fd.js"><link rel="prefetch" href="/db-tutorial/assets/js/64.78f59f12.js"><link rel="prefetch" href="/db-tutorial/assets/js/65.61319496.js"><link rel="prefetch" href="/db-tutorial/assets/js/66.f5a6ec28.js"><link rel="prefetch" href="/db-tutorial/assets/js/67.f951881a.js"><link rel="prefetch" href="/db-tutorial/assets/js/68.737c984b.js"><link rel="prefetch" href="/db-tutorial/assets/js/69.a3149896.js"><link rel="prefetch" href="/db-tutorial/assets/js/7.c455f857.js"><link rel="prefetch" href="/db-tutorial/assets/js/70.4e169493.js"><link rel="prefetch" href="/db-tutorial/assets/js/71.39d3a931.js"><link rel="prefetch" href="/db-tutorial/assets/js/72.7353c48a.js"><link rel="prefetch" href="/db-tutorial/assets/js/73.f05c8db8.js"><link rel="prefetch" href="/db-tutorial/assets/js/74.900c3e27.js"><link rel="prefetch" href="/db-tutorial/assets/js/75.9af5cc6e.js"><link rel="prefetch" href="/db-tutorial/assets/js/76.e5498672.js"><link rel="prefetch" href="/db-tutorial/assets/js/77.97d6e3e6.js"><link rel="prefetch" href="/db-tutorial/assets/js/78.12c069f8.js"><link rel="prefetch" href="/db-tutorial/assets/js/79.5c8ca0d8.js"><link rel="prefetch" href="/db-tutorial/assets/js/8.acea45c9.js"><link rel="prefetch" href="/db-tutorial/assets/js/80.1ba70bec.js"><link rel="prefetch" href="/db-tutorial/assets/js/81.8d6502ea.js"><link rel="prefetch" href="/db-tutorial/assets/js/82.040529c2.js"><link rel="prefetch" href="/db-tutorial/assets/js/83.4ccae056.js"><link rel="prefetch" href="/db-tutorial/assets/js/84.c8813d8a.js"><link rel="prefetch" href="/db-tutorial/assets/js/85.947070c9.js"><link rel="prefetch" href="/db-tutorial/assets/js/9.0ef39ce9.js">
    <link rel="stylesheet" href="/db-tutorial/assets/css/0.styles.5dc2cb3f.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/db-tutorial/" class="home-link router-link-active"><img src="https://raw.githubusercontent.com/dunwu/images/dev/common/dunwu-logo.png" alt="DB-TUTORIAL" class="logo"> <span class="site-name can-hide">DB-TUTORIAL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/db-tutorial/12.数据库/01.数据库综合/" class="nav-link">数据库综合</a></div><div class="nav-item"><a href="/db-tutorial/12.数据库/02.数据库中间件/" class="nav-link">数据库中间件</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关系型数据库" class="dropdown-title"><a href="/db-tutorial/12.数据库/03.关系型数据库/" class="link-title">关系型数据库</a> <span class="title" style="display:none;">关系型数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db-tutorial/12.数据库/03.关系型数据库/01.综合/" class="nav-link">综合</a></li><li class="dropdown-item"><!----> <a href="/db-tutorial/12.数据库/03.关系型数据库/02.Mysql/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/db-tutorial/12.数据库/03.关系型数据库/99.其他/" class="nav-link">其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档数据库" class="dropdown-title"><!----> <span class="title" style="display:;">文档数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db-tutorial/12.数据库/04.文档数据库/01.MongoDB/" class="nav-link">MongoDB</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="KV数据库" class="dropdown-title"><!----> <span class="title" style="display:;">KV数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db-tutorial/12.数据库/05.KV数据库/01.Redis/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="搜索引擎数据库" class="dropdown-title"><!----> <span class="title" style="display:;">搜索引擎数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db-tutorial/12.数据库/07.搜索引擎数据库/01.Elasticsearch/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/db-tutorial/12.数据库/07.搜索引擎数据库/02.Elastic/" class="nav-link">Elastic技术栈</a></li></ul></div></div> <a href="https://github.com/dunwu/db-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/db-tutorial/12.数据库/01.数据库综合/" class="nav-link">数据库综合</a></div><div class="nav-item"><a href="/db-tutorial/12.数据库/02.数据库中间件/" class="nav-link">数据库中间件</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="关系型数据库" class="dropdown-title"><a href="/db-tutorial/12.数据库/03.关系型数据库/" class="link-title">关系型数据库</a> <span class="title" style="display:none;">关系型数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db-tutorial/12.数据库/03.关系型数据库/01.综合/" class="nav-link">综合</a></li><li class="dropdown-item"><!----> <a href="/db-tutorial/12.数据库/03.关系型数据库/02.Mysql/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/db-tutorial/12.数据库/03.关系型数据库/99.其他/" class="nav-link">其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文档数据库" class="dropdown-title"><!----> <span class="title" style="display:;">文档数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db-tutorial/12.数据库/04.文档数据库/01.MongoDB/" class="nav-link">MongoDB</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="KV数据库" class="dropdown-title"><!----> <span class="title" style="display:;">KV数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db-tutorial/12.数据库/05.KV数据库/01.Redis/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="搜索引擎数据库" class="dropdown-title"><!----> <span class="title" style="display:;">搜索引擎数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db-tutorial/12.数据库/07.搜索引擎数据库/01.Elasticsearch/" class="nav-link">Elasticsearch</a></li><li class="dropdown-item"><!----> <a href="/db-tutorial/12.数据库/07.搜索引擎数据库/02.Elastic/" class="nav-link">Elastic技术栈</a></li></ul></div></div> <a href="https://github.com/dunwu/db-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据库综合</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/db-tutorial/pages/0e1012/" class="sidebar-link">Nosql技术选型</a></li><li><a href="/db-tutorial/pages/d7cd88/" class="sidebar-link">数据结构与数据库索引</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据库中间件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>Shardingsphere</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/db-tutorial/pages/5ed2a2/" class="sidebar-link">ShardingSphere 简介</a></li><li><a href="/db-tutorial/pages/8448de/" class="sidebar-link">ShardingSphere Jdbc</a></li></ul></section></li><li><a href="/db-tutorial/pages/e2648c/" class="sidebar-link">版本管理中间件 Flyway</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>关系型数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>综合</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/db-tutorial/pages/9bb28f/" class="sidebar-link">关系型数据库面试</a></li><li><a href="/db-tutorial/pages/b71c9e/" aria-current="page" class="active sidebar-link">sql-cheat-sheet</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/db-tutorial/pages/b71c9e/#一、基本概念" class="sidebar-link">一、基本概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#数据库术语" class="sidebar-link">数据库术语</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#sql-语法" class="sidebar-link">SQL 语法</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#sql-语法结构" class="sidebar-link">SQL 语法结构</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#sql-语法要点" class="sidebar-link">SQL 语法要点</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#sql-分类" class="sidebar-link">SQL 分类</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#数据定义语言-ddl" class="sidebar-link">数据定义语言（DDL）</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#数据操纵语言-dml" class="sidebar-link">数据操纵语言（DML）</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#事务控制语言-tcl" class="sidebar-link">事务控制语言（TCL）</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#数据控制语言-dcl" class="sidebar-link">数据控制语言（DCL）</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/db-tutorial/pages/b71c9e/#二、增删改查" class="sidebar-link">二、增删改查</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#插入数据" class="sidebar-link">插入数据</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#更新数据" class="sidebar-link">更新数据</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#删除数据" class="sidebar-link">删除数据</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#查询数据" class="sidebar-link">查询数据</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/db-tutorial/pages/b71c9e/#三、子查询" class="sidebar-link">三、子查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#where" class="sidebar-link">WHERE</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#in-和-between" class="sidebar-link">IN 和 BETWEEN</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#and、or、not" class="sidebar-link">AND、OR、NOT</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#like" class="sidebar-link">LIKE</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/db-tutorial/pages/b71c9e/#四、连接和组合" class="sidebar-link">四、连接和组合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#连接-join" class="sidebar-link">连接（JOIN）</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#内连接-inner-join" class="sidebar-link">内连接（INNER JOIN）</a></li><li class="sidebar-sub-header level5"><a href="/db-tutorial/pages/b71c9e/#自连接" class="sidebar-link">自连接（=）</a></li><li class="sidebar-sub-header level5"><a href="/db-tutorial/pages/b71c9e/#自然连接-natural-join" class="sidebar-link">自然连接（NATURAL JOIN）</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#外连接-outer-join" class="sidebar-link">外连接（OUTER JOIN）</a></li><li class="sidebar-sub-header level5"><a href="/db-tutorial/pages/b71c9e/#左连接-left-join" class="sidebar-link">左连接（LEFT JOIN）</a></li><li class="sidebar-sub-header level5"><a href="/db-tutorial/pages/b71c9e/#右连接-right-join" class="sidebar-link">右连接（RIGHT JOIN）</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#组合-union" class="sidebar-link">组合（UNION）</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#join-vs-union" class="sidebar-link">JOIN vs UNION</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/db-tutorial/pages/b71c9e/#五、函数" class="sidebar-link">五、函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#文本处理" class="sidebar-link">文本处理</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#日期和时间处理" class="sidebar-link">日期和时间处理</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#数值处理" class="sidebar-link">数值处理</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#汇总" class="sidebar-link">汇总</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/db-tutorial/pages/b71c9e/#六、排序和分组" class="sidebar-link">六、排序和分组</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#order-by" class="sidebar-link">ORDER BY</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#group-by" class="sidebar-link">GROUP BY</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#having" class="sidebar-link">HAVING</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/db-tutorial/pages/b71c9e/#七、数据定义" class="sidebar-link">七、数据定义</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#数据库-database" class="sidebar-link">数据库（DATABASE）</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#创建数据库" class="sidebar-link">创建数据库</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#删除数据库" class="sidebar-link">删除数据库</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#选择数据库" class="sidebar-link">选择数据库</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#数据表-table" class="sidebar-link">数据表（TABLE）</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#创建数据表" class="sidebar-link">创建数据表</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#删除数据表" class="sidebar-link">删除数据表</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#修改数据表" class="sidebar-link">修改数据表</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#视图-view" class="sidebar-link">视图（VIEW）</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#创建视图" class="sidebar-link">创建视图</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#删除视图" class="sidebar-link">删除视图</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#索引-index" class="sidebar-link">索引（INDEX）</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#创建索引" class="sidebar-link">创建索引</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#创建唯一索引" class="sidebar-link">创建唯一索引</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#删除索引" class="sidebar-link">删除索引</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#约束" class="sidebar-link">约束</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/db-tutorial/pages/b71c9e/#八、事务处理" class="sidebar-link">八、事务处理</a></li><li class="sidebar-sub-header level2"><a href="/db-tutorial/pages/b71c9e/#九、权限控制" class="sidebar-link">九、权限控制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#创建账户" class="sidebar-link">创建账户</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#修改账户名" class="sidebar-link">修改账户名</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#删除账户" class="sidebar-link">删除账户</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#查看权限" class="sidebar-link">查看权限</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#授予权限" class="sidebar-link">授予权限</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#删除权限" class="sidebar-link">删除权限</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#更改密码" class="sidebar-link">更改密码</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/db-tutorial/pages/b71c9e/#十、存储过程和游标" class="sidebar-link">十、存储过程和游标</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#存储过程优缺点" class="sidebar-link">存储过程优缺点</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#使用存储过程" class="sidebar-link">使用存储过程</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#游标" class="sidebar-link">游标</a></li><li class="sidebar-sub-header level3"><a href="/db-tutorial/pages/b71c9e/#触发器" class="sidebar-link">触发器</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#触发器特性" class="sidebar-link">触发器特性</a></li><li class="sidebar-sub-header level4"><a href="/db-tutorial/pages/b71c9e/#触发器指令" class="sidebar-link">触发器指令</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/db-tutorial/pages/b71c9e/#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/db-tutorial/pages/55e9a7/" class="sidebar-link">扩展 SQL</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>Mysql</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/db-tutorial/pages/5fe0f3/" class="sidebar-link">Mysql 应用指南</a></li><li><a href="/db-tutorial/pages/8262aa/" class="sidebar-link">MySQL 工作流</a></li><li><a href="/db-tutorial/pages/00b04d/" class="sidebar-link">Mysql 事务</a></li><li><a href="/db-tutorial/pages/f1f151/" class="sidebar-link">Mysql 锁</a></li><li><a href="/db-tutorial/pages/fcb19c/" class="sidebar-link">Mysql 索引</a></li><li><a href="/db-tutorial/pages/396816/" class="sidebar-link">Mysql 性能优化</a></li><li><a href="/db-tutorial/pages/e33b92/" class="sidebar-link">Mysql 运维</a></li><li><a href="/db-tutorial/pages/5da42d/" class="sidebar-link">Mysql 配置</a></li><li><a href="/db-tutorial/pages/7b0caf/" class="sidebar-link">Mysql 常见问题</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/db-tutorial/pages/52609d/" class="sidebar-link">PostgreSQL 应用指南</a></li><li><a href="/db-tutorial/pages/f27c0c/" class="sidebar-link">H2 应用指南</a></li><li><a href="/db-tutorial/pages/bdcd7e/" class="sidebar-link">sqlite</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>文档数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>MongoDB</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/db-tutorial/pages/3288f3/" class="sidebar-link">MongoDB 应用指南</a></li><li><a href="/db-tutorial/pages/7efbac/" class="sidebar-link">MongoDB 的 CRUD 操作</a></li><li><a href="/db-tutorial/pages/75daa5/" class="sidebar-link">MongoDB 的聚合操作</a></li><li><a href="/db-tutorial/pages/4574fe/" class="sidebar-link">MongoDB 事务</a></li><li><a href="/db-tutorial/pages/562f99/" class="sidebar-link">MongoDB 建模</a></li><li><a href="/db-tutorial/pages/88c7d3/" class="sidebar-link">MongoDB 建模示例</a></li><li><a href="/db-tutorial/pages/10c674/" class="sidebar-link">MongoDB 索引</a></li><li><a href="/db-tutorial/pages/505407/" class="sidebar-link">MongoDB 复制</a></li><li><a href="/db-tutorial/pages/ad08f5/" class="sidebar-link">MongoDB 分片</a></li><li><a href="/db-tutorial/pages/5e3c30/" class="sidebar-link">MongoDB 运维</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>KV数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>Redis</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/db-tutorial/pages/451b73/" class="sidebar-link">Redis 面试总结</a></li><li><a href="/db-tutorial/pages/94e9d6/" class="sidebar-link">Redis 应用指南</a></li><li><a href="/db-tutorial/pages/ed757c/" class="sidebar-link">Redis 数据类型和应用</a></li><li><a href="/db-tutorial/pages/4de901/" class="sidebar-link">Redis 持久化</a></li><li><a href="/db-tutorial/pages/379cd8/" class="sidebar-link">Redis 复制</a></li><li><a href="/db-tutorial/pages/615afe/" class="sidebar-link">Redis 哨兵</a></li><li><a href="/db-tutorial/pages/77dfbe/" class="sidebar-link">Redis 集群</a></li><li><a href="/db-tutorial/pages/1fc9c4/" class="sidebar-link">Redis 实战</a></li><li><a href="/db-tutorial/pages/537098/" class="sidebar-link">Redis 运维</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>列式数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/db-tutorial/pages/7ab03c/" class="sidebar-link">Hbase</a></li><li><a href="/db-tutorial/pages/ca3ca5/" class="sidebar-link">Cassandra</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>搜索引擎数据库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>Elasticsearch</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/db-tutorial/pages/0cb563/" class="sidebar-link">Elasticsearch 面试总结</a></li><li><a href="/db-tutorial/pages/98c3a5/" class="sidebar-link">Elasticsearch 快速入门</a></li><li><a href="/db-tutorial/pages/0fb506/" class="sidebar-link">Elasticsearch 简介</a></li><li><a href="/db-tutorial/pages/293175/" class="sidebar-link">Elasticsearch 索引</a></li><li><a href="/db-tutorial/pages/83bd15/" class="sidebar-link">Elasticsearch 查询</a></li><li><a href="/db-tutorial/pages/e1b769/" class="sidebar-link">Elasticsearch 高亮搜索及显示</a></li><li><a href="/db-tutorial/pages/24baff/" class="sidebar-link">Elasticsearch 排序</a></li><li><a href="/db-tutorial/pages/f89f66/" class="sidebar-link">Elasticsearch 聚合</a></li><li><a href="/db-tutorial/pages/a5a001/" class="sidebar-link">Elasticsearch 分析器</a></li><li><a href="/db-tutorial/pages/2d95ce/" class="sidebar-link">Elasticsearch 性能优化</a></li><li><a href="/db-tutorial/pages/4b1907/" class="sidebar-link">Elasticsearch Rest API</a></li><li><a href="/db-tutorial/pages/201e43/" class="sidebar-link">ElasticSearch Java API 之 High Level REST Client</a></li><li><a href="/db-tutorial/pages/9a2546/" class="sidebar-link">Elasticsearch 集群和分片</a></li><li><a href="/db-tutorial/pages/fdaf15/" class="sidebar-link">Elasticsearch 运维</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>Elastic</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/db-tutorial/pages/553160/" class="sidebar-link">Elastic 快速入门</a></li><li><a href="/db-tutorial/pages/b7f079/" class="sidebar-link">Elastic 技术栈之 Filebeat</a></li><li><a href="/db-tutorial/pages/7c067f/" class="sidebar-link">Filebeat 运维</a></li><li><a href="/db-tutorial/pages/002159/" class="sidebar-link">Elastic 技术栈之 Kibana</a></li><li><a href="/db-tutorial/pages/fc47af/" class="sidebar-link">Kibana 运维</a></li><li><a href="/db-tutorial/pages/55ce99/" class="sidebar-link">Elastic 技术栈之 Logstash</a></li><li><a href="/db-tutorial/pages/92df30/" class="sidebar-link">Logstash 运维</a></li></ul></section></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/db-tutorial/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/db-tutorial/categories/?category=%E6%95%B0%E6%8D%AE%E5%BA%93" title="分类" data-v-06225672>数据库</a></li><li data-v-06225672><a href="/db-tutorial/categories/?category=%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93" title="分类" data-v-06225672>关系型数据库</a></li><li data-v-06225672><a href="/db-tutorial/categories/?category=%E7%BB%BC%E5%90%88" title="分类" data-v-06225672>综合</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/dunwu" target="_blank" title="作者" class="beLink" data-v-06225672>dunwu</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2018-06-15</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">sql-cheat-sheet<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="sql-cheat-sheet"><a href="#sql-cheat-sheet" class="header-anchor">#</a> SQL Cheat Sheet</h1> <blockquote><p>本文针对关系型数据库的基本语法。限于篇幅，本文侧重说明用法，不会展开讲解特性、原理。</p> <p>本文语法主要针对 Mysql，但大部分的语法对其他关系型数据库也适用。</p></blockquote> <p><img src="https://raw.githubusercontent.com/dunwu/images/dev/snap/20200115160512.png" alt="img"></p> <h2 id="一、基本概念"><a href="#一、基本概念" class="header-anchor">#</a> 一、基本概念</h2> <h3 id="数据库术语"><a href="#数据库术语" class="header-anchor">#</a> 数据库术语</h3> <ul><li><code>数据库（database）</code> - 保存有组织的数据的容器（通常是一个文件或一组文件）。</li> <li><code>数据表（table）</code> - 某种特定类型数据的结构化清单。</li> <li><code>模式（schema）</code> - 关于数据库和表的布局及特性的信息。模式定义了数据在表中如何存储，包含存储什么样的数据，数据如何分解，各部分信息如何命名等信息。数据库和表都有模式。</li> <li><code>列（column）</code> - 表中的一个字段。所有表都是由一个或多个列组成的。</li> <li><code>行（row）</code> - 表中的一个记录。</li> <li><code>主键（primary key）</code> - 一列（或一组列），其值能够唯一标识表中每一行。</li></ul> <h3 id="sql-语法"><a href="#sql-语法" class="header-anchor">#</a> SQL 语法</h3> <blockquote><p>SQL（Structured Query Language)，标准 SQL 由 ANSI 标准委员会管理，从而称为 ANSI SQL。各个 DBMS 都有自己的实现，如 PL/SQL、Transact-SQL 等。</p></blockquote> <h4 id="sql-语法结构"><a href="#sql-语法结构" class="header-anchor">#</a> SQL 语法结构</h4> <p><img src="https://raw.githubusercontent.com/dunwu/images/master/cs/database/mysql/sql-syntax.png" alt="img"></p> <p>SQL 语法结构包括：</p> <ul><li><strong><code>子句</code></strong> - 是语句和查询的组成成分。（在某些情况下，这些都是可选的。）</li> <li><strong><code>表达式</code></strong> - 可以产生任何标量值，或由列和行的数据库表</li> <li><strong><code>谓词</code></strong> - 给需要评估的 SQL 三值逻辑（3VL）（true/false/unknown）或布尔真值指定条件，并限制语句和查询的效果，或改变程序流程。</li> <li><strong><code>查询</code></strong> - 基于特定条件检索数据。这是 SQL 的一个重要组成部分。</li> <li><strong><code>语句</code></strong> - 可以持久地影响纲要和数据，也可以控制数据库事务、程序流程、连接、会话或诊断。</li></ul> <h4 id="sql-语法要点"><a href="#sql-语法要点" class="header-anchor">#</a> SQL 语法要点</h4> <ul><li><strong>SQL 语句不区分大小写</strong>，但是数据库表名、列名和值是否区分，依赖于具体的 DBMS 以及配置。</li></ul> <p>例如：<code>SELECT</code> 与 <code>select</code> 、<code>Select</code> 是相同的。</p> <ul><li><p><strong>多条 SQL 语句必须以分号（<code>;</code>）分隔</strong>。</p></li> <li><p>处理 SQL 语句时，<strong>所有空格都被忽略</strong>。SQL 语句可以写成一行，也可以分写为多行。</p></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 一行 SQL 语句</span>
<span class="token keyword">UPDATE</span> <span class="token keyword">user</span> <span class="token keyword">SET</span> username<span class="token operator">=</span><span class="token string">'robot'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'robot'</span> <span class="token keyword">WHERE</span> username <span class="token operator">=</span> <span class="token string">'root'</span><span class="token punctuation">;</span>

<span class="token comment">-- 多行 SQL 语句</span>
<span class="token keyword">UPDATE</span> <span class="token keyword">user</span>
<span class="token keyword">SET</span> username<span class="token operator">=</span><span class="token string">'robot'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'robot'</span>
<span class="token keyword">WHERE</span> username <span class="token operator">=</span> <span class="token string">'root'</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>SQL 支持三种注释</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">## 注释1</span>
<span class="token comment">-- 注释2</span>
<span class="token comment">/* 注释3 */</span>
</code></pre></div><h4 id="sql-分类"><a href="#sql-分类" class="header-anchor">#</a> SQL 分类</h4> <h4 id="数据定义语言-ddl"><a href="#数据定义语言-ddl" class="header-anchor">#</a> 数据定义语言（DDL）</h4> <p>数据定义语言（Data Definition Language，DDL）是 SQL 语言集中负责数据结构定义与数据库对象定义的语言。</p> <p>DDL 的主要功能是<strong>定义数据库对象</strong>。</p> <p>DDL 的核心指令是 <code>CREATE</code>、<code>ALTER</code>、<code>DROP</code>。</p> <h4 id="数据操纵语言-dml"><a href="#数据操纵语言-dml" class="header-anchor">#</a> 数据操纵语言（DML）</h4> <p>数据操纵语言（Data Manipulation Language, DML）是用于数据库操作，对数据库其中的对象和数据运行访问工作的编程语句。</p> <p>DML 的主要功能是 <strong>访问数据</strong>，因此其语法都是以<strong>读写数据库</strong>为主。</p> <p>DML 的核心指令是 <code>INSERT</code>、<code>UPDATE</code>、<code>DELETE</code>、<code>SELECT</code>。这四个指令合称 CRUD(Create, Read, Update, Delete)，即增删改查。</p> <h4 id="事务控制语言-tcl"><a href="#事务控制语言-tcl" class="header-anchor">#</a> 事务控制语言（TCL）</h4> <p>事务控制语言 (Transaction Control Language, TCL) 用于<strong>管理数据库中的事务</strong>。这些用于管理由 DML 语句所做的更改。它还允许将语句分组为逻辑事务。</p> <p>TCL 的核心指令是 <code>COMMIT</code>、<code>ROLLBACK</code>。</p> <h4 id="数据控制语言-dcl"><a href="#数据控制语言-dcl" class="header-anchor">#</a> 数据控制语言（DCL）</h4> <p>数据控制语言 (Data Control Language, DCL) 是一种可对数据访问权进行控制的指令，它可以控制特定用户账户对数据表、查看表、预存程序、用户自定义函数等数据库对象的控制权。</p> <p>DCL 的核心指令是 <code>GRANT</code>、<code>REVOKE</code>。</p> <p>DCL 以<strong>控制用户的访问权限</strong>为主，因此其指令作法并不复杂，可利用 DCL 控制的权限有：<code>CONNECT</code>、<code>SELECT</code>、<code>INSERT</code>、<code>UPDATE</code>、<code>DELETE</code>、<code>EXECUTE</code>、<code>USAGE</code>、<code>REFERENCES</code>。</p> <p>根据不同的 DBMS 以及不同的安全性实体，其支持的权限控制也有所不同。</p> <hr> <p><strong>（以下为 DML 语句用法）</strong></p> <h2 id="二、增删改查"><a href="#二、增删改查" class="header-anchor">#</a> 二、增删改查</h2> <blockquote><p>增删改查，又称为 CRUD，数据库基本操作中的基本操作。</p></blockquote> <h3 id="插入数据"><a href="#插入数据" class="header-anchor">#</a> 插入数据</h3> <blockquote><ul><li><code>INSERT INTO</code> 语句用于向表中插入新记录。</li></ul></blockquote> <p><strong>插入完整的行</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token keyword">user</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'root'</span><span class="token punctuation">,</span> <span class="token string">'root'</span><span class="token punctuation">,</span> <span class="token string">'xxxx@163.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>插入行的一部分</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token keyword">user</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">,</span> email<span class="token punctuation">)</span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">'admin'</span><span class="token punctuation">,</span> <span class="token string">'admin'</span><span class="token punctuation">,</span> <span class="token string">'xxxx@163.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>插入查询出来的数据</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token keyword">user</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> name
<span class="token keyword">FROM</span> account<span class="token punctuation">;</span>
</code></pre></div><h3 id="更新数据"><a href="#更新数据" class="header-anchor">#</a> 更新数据</h3> <blockquote><ul><li><code>UPDATE</code> 语句用于更新表中的记录。</li></ul></blockquote> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> <span class="token keyword">user</span>
<span class="token keyword">SET</span> username<span class="token operator">=</span><span class="token string">'robot'</span><span class="token punctuation">,</span> password<span class="token operator">=</span><span class="token string">'robot'</span>
<span class="token keyword">WHERE</span> username <span class="token operator">=</span> <span class="token string">'root'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="删除数据"><a href="#删除数据" class="header-anchor">#</a> 删除数据</h3> <blockquote><ul><li><code>DELETE</code> 语句用于删除表中的记录。</li> <li><code>TRUNCATE TABLE</code> 可以清空表，也就是删除所有行。</li></ul></blockquote> <p><strong>删除表中的指定数据</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span>
<span class="token keyword">WHERE</span> username <span class="token operator">=</span> <span class="token string">'robot'</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>清空表中的数据</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="查询数据"><a href="#查询数据" class="header-anchor">#</a> 查询数据</h3> <blockquote><ul><li><code>SELECT</code> 语句用于从数据库中查询数据。</li> <li><code>DISTINCT</code> 用于返回唯一不同的值。它作用于所有列，也就是说所有列的值都相同才算相同。</li> <li><code>LIMIT</code> 限制返回的行数。可以有两个参数，第一个参数为起始行，从 0 开始；第二个参数为返回的总行数。
<ul><li><code>ASC</code> ：升序（默认）</li> <li><code>DESC</code> ：降序</li></ul></li></ul></blockquote> <p><strong>查询单列</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> prod_name
<span class="token keyword">FROM</span> products<span class="token punctuation">;</span>
</code></pre></div><p><strong>查询多列</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token punctuation">,</span> prod_price
<span class="token keyword">FROM</span> products<span class="token punctuation">;</span>
</code></pre></div><p><strong>查询所有列</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code>ELECT <span class="token operator">*</span>
<span class="token keyword">FROM</span> products<span class="token punctuation">;</span>
</code></pre></div><p><strong>查询不同的值</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span>
vend_id <span class="token keyword">FROM</span> products<span class="token punctuation">;</span>
</code></pre></div><p><strong>限制查询结果</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 返回前 5 行</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">LIMIT</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">LIMIT</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token comment">-- 返回第 3 ~ 5 行</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> mytable <span class="token keyword">LIMIT</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="三、子查询"><a href="#三、子查询" class="header-anchor">#</a> 三、子查询</h2> <blockquote><p>子查询是嵌套在较大查询中的 SQL 查询。子查询也称为<strong>内部查询</strong>或<strong>内部选择</strong>，而包含子查询的语句也称为<strong>外部查询</strong>或<strong>外部选择</strong>。</p></blockquote> <ul><li><p>子查询可以嵌套在 <code>SELECT</code>，<code>INSERT</code>，<code>UPDATE</code> 或 <code>DELETE</code> 语句内或另一个子查询中。</p></li> <li><p>子查询通常会在另一个 <code>SELECT</code> 语句的 <code>WHERE</code> 子句中添加。</p></li> <li><p>您可以使用比较运算符，如 <code>&gt;</code>，<code>&lt;</code>，或 <code>=</code>。比较运算符也可以是多行运算符，如 <code>IN</code>，<code>ANY</code> 或 <code>ALL</code>。</p></li> <li><p>子查询必须被圆括号 <code>()</code> 括起来。</p></li> <li><p>内部查询首先在其父查询之前执行，以便可以将内部查询的结果传递给外部查询。执行过程可以参考下图：</p> <p align="center"><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/database/mysql/sql-subqueries.gif" alt="sql-subqueries"></p></li></ul> <p><strong>子查询的子查询</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> cust_name<span class="token punctuation">,</span> cust_contact
<span class="token keyword">FROM</span> customers
<span class="token keyword">WHERE</span> cust_id <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> cust_id
                  <span class="token keyword">FROM</span> orders
                  <span class="token keyword">WHERE</span> order_num <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> order_num
                                      <span class="token keyword">FROM</span> orderitems
                                      <span class="token keyword">WHERE</span> prod_id <span class="token operator">=</span> <span class="token string">'RGAN01'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="where"><a href="#where" class="header-anchor">#</a> WHERE</h3> <blockquote><p><code>WHERE</code> 子句用于过滤记录，即缩小访问数据的范围。<code>WHERE</code> 后跟一个返回 <code>true</code> 或 <code>false</code> 的条件。</p> <p><code>WHERE</code> 可以与 <code>SELECT</code>，<code>UPDATE</code> 和 <code>DELETE</code> 一起使用。</p></blockquote> <p>可以在 <code>WHERE</code> 子句中使用的操作符：</p> <table><thead><tr><th>运算符</th> <th>描述</th></tr></thead> <tbody><tr><td>=</td> <td>等于</td></tr> <tr><td>&lt;&gt;</td> <td>不等于。注释：在 SQL 的一些版本中，该操作符可被写成 !=</td></tr> <tr><td>&gt;</td> <td>大于</td></tr> <tr><td>&lt;</td> <td>小于</td></tr> <tr><td>&gt;=</td> <td>大于等于</td></tr> <tr><td>&lt;=</td> <td>小于等于</td></tr> <tr><td>BETWEEN</td> <td>在某个范围内</td></tr> <tr><td>LIKE</td> <td>搜索某种模式</td></tr> <tr><td>IN</td> <td>指定针对某个列的多个可能值</td></tr></tbody></table> <p><strong><code>SELECT</code> 语句中的 <code>WHERE</code> 子句</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> Customers
<span class="token keyword">WHERE</span> cust_name <span class="token operator">=</span> <span class="token string">'Kids Place'</span><span class="token punctuation">;</span>
</code></pre></div><p><strong><code>UPDATE</code> 语句中的 <code>WHERE</code> 子句</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> Customers
<span class="token keyword">SET</span> cust_name <span class="token operator">=</span> <span class="token string">'Jack Jones'</span>
<span class="token keyword">WHERE</span> cust_name <span class="token operator">=</span> <span class="token string">'Kids Place'</span><span class="token punctuation">;</span>
</code></pre></div><p><strong><code>DELETE</code> 语句中的 <code>WHERE</code> 子句</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> Customers
<span class="token keyword">WHERE</span> cust_name <span class="token operator">=</span> <span class="token string">'Kids Place'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="in-和-between"><a href="#in-和-between" class="header-anchor">#</a> IN 和 BETWEEN</h3> <blockquote><p><code>IN</code> 操作符在 <code>WHERE</code> 子句中使用，作用是在指定的几个特定值中任选一个值。</p> <p><code>BETWEEN</code> 操作符在 <code>WHERE</code> 子句中使用，作用是选取介于某个范围内的值。</p></blockquote> <p><strong>IN 示例</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> products
<span class="token keyword">WHERE</span> vend_id <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'DLL01'</span><span class="token punctuation">,</span> <span class="token string">'BRS01'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>BETWEEN 示例</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> products
<span class="token keyword">WHERE</span> prod_price <span class="token operator">BETWEEN</span> <span class="token number">3</span> <span class="token operator">AND</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="and、or、not"><a href="#and、or、not" class="header-anchor">#</a> AND、OR、NOT</h3> <blockquote><p><code>AND</code>、<code>OR</code>、<code>NOT</code> 是用于对过滤条件的逻辑处理指令。</p> <p><code>AND</code> 优先级高于 <code>OR</code>，为了明确处理顺序，可以使用 <code>()</code>。<code>AND</code> 操作符表示左右条件都要满足。</p> <p><code>OR</code> 操作符表示左右条件满足任意一个即可。</p> <p><code>NOT</code> 操作符用于否定一个条件。</p></blockquote> <p><strong>AND 示例</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token punctuation">,</span> prod_price
<span class="token keyword">FROM</span> products
<span class="token keyword">WHERE</span> vend_id <span class="token operator">=</span> <span class="token string">'DLL01'</span> <span class="token operator">AND</span> prod_price <span class="token operator">&lt;=</span> <span class="token number">4</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>OR 示例</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token punctuation">,</span> prod_price
<span class="token keyword">FROM</span> products
<span class="token keyword">WHERE</span> vend_id <span class="token operator">=</span> <span class="token string">'DLL01'</span> <span class="token operator">OR</span> vend_id <span class="token operator">=</span> <span class="token string">'BRS01'</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>NOT 示例</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> products
<span class="token keyword">WHERE</span> prod_price <span class="token operator">NOT</span> <span class="token operator">BETWEEN</span> <span class="token number">3</span> <span class="token operator">AND</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="like"><a href="#like" class="header-anchor">#</a> LIKE</h3> <blockquote><p><code>LIKE</code> 操作符在 <code>WHERE</code> 子句中使用，作用是确定字符串是否匹配模式。只有字段是文本值时才使用 <code>LIKE</code>。</p> <p><code>LIKE</code> 支持两个通配符匹配选项：<code>%</code> 和 <code>_</code>。</p> <ul><li><code>%</code> 表示任何字符出现任意次数。</li> <li><code>_</code> 表示任何字符出现一次。</li></ul> <p>不要滥用通配符，通配符位于开头处匹配会非常慢。</p></blockquote> <p><code>%</code> 示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token punctuation">,</span> prod_price
<span class="token keyword">FROM</span> products
<span class="token keyword">WHERE</span> prod_name <span class="token operator">LIKE</span> <span class="token string">'%bean bag%'</span><span class="token punctuation">;</span>
</code></pre></div><p><code>_</code> 示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> prod_id<span class="token punctuation">,</span> prod_name<span class="token punctuation">,</span> prod_price
<span class="token keyword">FROM</span> products
<span class="token keyword">WHERE</span> prod_name <span class="token operator">LIKE</span> <span class="token string">'__ inch teddy bear'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="四、连接和组合"><a href="#四、连接和组合" class="header-anchor">#</a> 四、连接和组合</h2> <h3 id="连接-join"><a href="#连接-join" class="header-anchor">#</a> 连接（JOIN）</h3> <blockquote><p>连接用于连接多个表，使用 <code>JOIN</code> 关键字，并且条件语句使用 <code>ON</code> 而不是 <code>WHERE</code>。</p></blockquote> <p>如果一个 <code>JOIN</code> 至少有一个公共字段并且它们之间存在关系，则该 <code>JOIN</code> 可以在两个或多个表上工作。</p> <p><code>JOIN</code> 保持基表（结构和数据）不变。<strong>连接可以替换子查询，并且比子查询的效率一般会更快</strong>。</p> <p><code>JOIN</code> 有两种连接类型：内连接和外连接。</p> <div align="center"><img src="https://raw.githubusercontent.com/dunwu/images/dev/cs/database/mysql/sql-join.png" alt="sql-join"></div> <h4 id="内连接-inner-join"><a href="#内连接-inner-join" class="header-anchor">#</a> 内连接（INNER JOIN）</h4> <p>内连接又称等值连接，<strong>使用 <code>INNER JOIN</code> 关键字</strong>。在没有条件语句的情况下<strong>返回笛卡尔积</strong>。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> vend_name<span class="token punctuation">,</span> prod_name<span class="token punctuation">,</span> prod_price
<span class="token keyword">FROM</span> vendors <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> products
<span class="token keyword">ON</span> vendors<span class="token punctuation">.</span>vend_id <span class="token operator">=</span> products<span class="token punctuation">.</span>vend_id<span class="token punctuation">;</span>
</code></pre></div><h5 id="自连接"><a href="#自连接" class="header-anchor">#</a> 自连接（<code>=</code>）</h5> <p>自连接可以看成内连接的一种，只是<strong>连接的表是自身</strong>而已。<strong>自然连接是把同名列通过 <code>=</code> 连接起来</strong>的，同名列可以有多个。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> c1<span class="token punctuation">.</span>cust_id<span class="token punctuation">,</span> c1<span class="token punctuation">.</span>cust_name<span class="token punctuation">,</span> c1<span class="token punctuation">.</span>cust_contact
<span class="token keyword">FROM</span> customers c1<span class="token punctuation">,</span> customers c2
<span class="token keyword">WHERE</span> c1<span class="token punctuation">.</span>cust_name <span class="token operator">=</span> c2<span class="token punctuation">.</span>cust_name
<span class="token operator">AND</span> c2<span class="token punctuation">.</span>cust_contact <span class="token operator">=</span> <span class="token string">'Jim Jones'</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="自然连接-natural-join"><a href="#自然连接-natural-join" class="header-anchor">#</a> 自然连接（NATURAL JOIN）</h5> <p>内连接提供连接的列，而自然连接<strong>自动连接所有同名列</strong>。自然连接使用 <code>NATURAL JOIN</code> 关键字。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> Products
<span class="token keyword">NATURAL</span> <span class="token keyword">JOIN</span> Customers<span class="token punctuation">;</span>
</code></pre></div><h4 id="外连接-outer-join"><a href="#外连接-outer-join" class="header-anchor">#</a> 外连接（OUTER JOIN）</h4> <p>外连接返回一个表中的所有行，并且仅返回来自此表中满足连接条件的那些行，即两个表中的列是相等的。外连接分为左外连接、右外连接、全外连接（Mysql 不支持）。</p> <h5 id="左连接-left-join"><a href="#左连接-left-join" class="header-anchor">#</a> 左连接（LEFT JOIN）</h5> <p>左外连接就是保留左表没有关联的行。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> customers<span class="token punctuation">.</span>cust_id<span class="token punctuation">,</span> orders<span class="token punctuation">.</span>order_num
<span class="token keyword">FROM</span> customers <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> orders
<span class="token keyword">ON</span> customers<span class="token punctuation">.</span>cust_id <span class="token operator">=</span> orders<span class="token punctuation">.</span>cust_id<span class="token punctuation">;</span>
</code></pre></div><h5 id="右连接-right-join"><a href="#右连接-right-join" class="header-anchor">#</a> 右连接（RIGHT JOIN）</h5> <p>右外连接就是保留右表没有关联的行。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> customers<span class="token punctuation">.</span>cust_id<span class="token punctuation">,</span> orders<span class="token punctuation">.</span>order_num
<span class="token keyword">FROM</span> customers <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> orders
<span class="token keyword">ON</span> customers<span class="token punctuation">.</span>cust_id <span class="token operator">=</span> orders<span class="token punctuation">.</span>cust_id<span class="token punctuation">;</span>
</code></pre></div><h3 id="组合-union"><a href="#组合-union" class="header-anchor">#</a> 组合（UNION）</h3> <blockquote><p><code>UNION</code> 运算符<strong>将两个或更多查询的结果组合起来，并生成一个结果集</strong>，其中包含来自 <code>UNION</code> 中参与查询的提取行。</p></blockquote> <p><code>UNION</code> 基本规则：</p> <ul><li>所有查询的列数和列顺序必须相同。</li> <li>每个查询中涉及表的列的数据类型必须相同或兼容。</li> <li>通常返回的列名取自第一个查询。</li></ul> <p>默认会去除相同行，如果需要保留相同行，使用 <code>UNION ALL</code>。</p> <p>只能包含一个 <code>ORDER BY</code> 子句，并且必须位于语句的最后。</p> <p>应用场景：</p> <ul><li>在一个查询中从不同的表返回结构数据。</li> <li>对一个表执行多个查询，按一个查询返回数据。</li></ul> <p>组合查询示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> cust_name<span class="token punctuation">,</span> cust_contact<span class="token punctuation">,</span> cust_email
<span class="token keyword">FROM</span> customers
<span class="token keyword">WHERE</span> cust_state <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'IL'</span><span class="token punctuation">,</span> <span class="token string">'IN'</span><span class="token punctuation">,</span> <span class="token string">'MI'</span><span class="token punctuation">)</span>
<span class="token keyword">UNION</span>
<span class="token keyword">SELECT</span> cust_name<span class="token punctuation">,</span> cust_contact<span class="token punctuation">,</span> cust_email
<span class="token keyword">FROM</span> customers
<span class="token keyword">WHERE</span> cust_name <span class="token operator">=</span> <span class="token string">'Fun4All'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="join-vs-union"><a href="#join-vs-union" class="header-anchor">#</a> JOIN vs UNION</h3> <ul><li><code>JOIN</code> 中连接表的列可能不同，但在 <code>UNION</code> 中，所有查询的列数和列顺序必须相同。</li> <li><code>UNION</code> 将查询之后的行放在一起（垂直放置），但 <code>JOIN</code> 将查询之后的列放在一起（水平放置），即它构成一个笛卡尔积。</li></ul> <h2 id="五、函数"><a href="#五、函数" class="header-anchor">#</a> 五、函数</h2> <blockquote><p>🔔 注意：不同数据库的函数往往各不相同，因此不可移植。本节主要以 Mysql 的函数为例。</p></blockquote> <h3 id="文本处理"><a href="#文本处理" class="header-anchor">#</a> 文本处理</h3> <table><thead><tr><th style="text-align:center;">函数</th> <th style="text-align:center;">说明</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>LEFT()</code>、<code>RIGHT()</code></td> <td style="text-align:center;">左边或者右边的字符</td></tr> <tr><td style="text-align:center;"><code>LOWER()</code>、<code>UPPER()</code></td> <td style="text-align:center;">转换为小写或者大写</td></tr> <tr><td style="text-align:center;"><code>LTRIM()</code>、<code>RTIM()</code></td> <td style="text-align:center;">去除左边或者右边的空格</td></tr> <tr><td style="text-align:center;"><code>LENGTH()</code></td> <td style="text-align:center;">长度</td></tr> <tr><td style="text-align:center;"><code>SOUNDEX()</code></td> <td style="text-align:center;">转换为语音值</td></tr></tbody></table> <p>其中， <strong>SOUNDEX()</strong> 可以将一个字符串转换为描述其语音表示的字母数字模式。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> mytable
<span class="token keyword">WHERE</span> SOUNDEX<span class="token punctuation">(</span>col1<span class="token punctuation">)</span> <span class="token operator">=</span> SOUNDEX<span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="日期和时间处理"><a href="#日期和时间处理" class="header-anchor">#</a> 日期和时间处理</h3> <ul><li>日期格式：<code>YYYY-MM-DD</code></li> <li>时间格式：<code>HH:MM:SS</code></li></ul> <table><thead><tr><th style="text-align:center;">函 数</th> <th style="text-align:center;">说 明</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>AddDate()</code></td> <td style="text-align:center;">增加一个日期（天、周等）</td></tr> <tr><td style="text-align:center;"><code>AddTime()</code></td> <td style="text-align:center;">增加一个时间（时、分等）</td></tr> <tr><td style="text-align:center;"><code>CurDate()</code></td> <td style="text-align:center;">返回当前日期</td></tr> <tr><td style="text-align:center;"><code>CurTime()</code></td> <td style="text-align:center;">返回当前时间</td></tr> <tr><td style="text-align:center;"><code>Date()</code></td> <td style="text-align:center;">返回日期时间的日期部分</td></tr> <tr><td style="text-align:center;"><code>DateDiff()</code></td> <td style="text-align:center;">计算两个日期之差</td></tr> <tr><td style="text-align:center;"><code>Date_Add()</code></td> <td style="text-align:center;">高度灵活的日期运算函数</td></tr> <tr><td style="text-align:center;"><code>Date_Format()</code></td> <td style="text-align:center;">返回一个格式化的日期或时间串</td></tr> <tr><td style="text-align:center;"><code>Day()</code></td> <td style="text-align:center;">返回一个日期的天数部分</td></tr> <tr><td style="text-align:center;"><code>DayOfWeek()</code></td> <td style="text-align:center;">对于一个日期，返回对应的星期几</td></tr> <tr><td style="text-align:center;"><code>Hour()</code></td> <td style="text-align:center;">返回一个时间的小时部分</td></tr> <tr><td style="text-align:center;"><code>Minute()</code></td> <td style="text-align:center;">返回一个时间的分钟部分</td></tr> <tr><td style="text-align:center;"><code>Month()</code></td> <td style="text-align:center;">返回一个日期的月份部分</td></tr> <tr><td style="text-align:center;"><code>Now()</code></td> <td style="text-align:center;">返回当前日期和时间</td></tr> <tr><td style="text-align:center;"><code>Second()</code></td> <td style="text-align:center;">返回一个时间的秒部分</td></tr> <tr><td style="text-align:center;"><code>Time()</code></td> <td style="text-align:center;">返回一个日期时间的时间部分</td></tr> <tr><td style="text-align:center;"><code>Year()</code></td> <td style="text-align:center;">返回一个日期的年份部分</td></tr></tbody></table> <div class="language-sql extra-class"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>2018-4-14 20:25:11
</code></pre></div><h3 id="数值处理"><a href="#数值处理" class="header-anchor">#</a> 数值处理</h3> <table><thead><tr><th style="text-align:center;">函数</th> <th style="text-align:center;">说明</th></tr></thead> <tbody><tr><td style="text-align:center;">SIN()</td> <td style="text-align:center;">正弦</td></tr> <tr><td style="text-align:center;">COS()</td> <td style="text-align:center;">余弦</td></tr> <tr><td style="text-align:center;">TAN()</td> <td style="text-align:center;">正切</td></tr> <tr><td style="text-align:center;">ABS()</td> <td style="text-align:center;">绝对值</td></tr> <tr><td style="text-align:center;">SQRT()</td> <td style="text-align:center;">平方根</td></tr> <tr><td style="text-align:center;">MOD()</td> <td style="text-align:center;">余数</td></tr> <tr><td style="text-align:center;">EXP()</td> <td style="text-align:center;">指数</td></tr> <tr><td style="text-align:center;">PI()</td> <td style="text-align:center;">圆周率</td></tr> <tr><td style="text-align:center;">RAND()</td> <td style="text-align:center;">随机数</td></tr></tbody></table> <h3 id="汇总"><a href="#汇总" class="header-anchor">#</a> 汇总</h3> <table><thead><tr><th style="text-align:center;">函 数</th> <th style="text-align:center;">说 明</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>AVG()</code></td> <td style="text-align:center;">返回某列的平均值</td></tr> <tr><td style="text-align:center;"><code>COUNT()</code></td> <td style="text-align:center;">返回某列的行数</td></tr> <tr><td style="text-align:center;"><code>MAX()</code></td> <td style="text-align:center;">返回某列的最大值</td></tr> <tr><td style="text-align:center;"><code>MIN()</code></td> <td style="text-align:center;">返回某列的最小值</td></tr> <tr><td style="text-align:center;"><code>SUM()</code></td> <td style="text-align:center;">返回某列值之和</td></tr></tbody></table> <p><code>AVG()</code> 会忽略 NULL 行。</p> <p>使用 DISTINCT 可以让汇总函数值汇总不同的值。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span><span class="token keyword">DISTINCT</span> col1<span class="token punctuation">)</span> <span class="token keyword">AS</span> avg_col
<span class="token keyword">FROM</span> mytable
</code></pre></div><h2 id="六、排序和分组"><a href="#六、排序和分组" class="header-anchor">#</a> 六、排序和分组</h2> <h3 id="order-by"><a href="#order-by" class="header-anchor">#</a> ORDER BY</h3> <blockquote><p><code>ORDER BY</code> 用于对结果集进行排序。</p></blockquote> <p><code>ORDER BY</code> 有两种排序模式：</p> <ul><li><code>ASC</code> ：升序（默认）</li> <li><code>DESC</code> ：降序</li></ul> <p>可以按多个列进行排序，并且为每个列指定不同的排序方式。</p> <p>指定多个列的排序示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> products
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> prod_price <span class="token keyword">DESC</span><span class="token punctuation">,</span> prod_name <span class="token keyword">ASC</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="group-by"><a href="#group-by" class="header-anchor">#</a> GROUP BY</h3> <blockquote><p><code>GROUP BY</code> 子句将记录分组到汇总行中，<code>GROUP BY</code> 为每个组返回一个记录。</p></blockquote> <p><code>GROUP BY</code> 可以按一列或多列进行分组。</p> <p><code>GROUP BY</code> 通常还涉及聚合函数：COUNT，MAX，SUM，AVG 等。</p> <p><code>GROUP BY</code> 按分组字段进行排序后，<code>ORDER BY</code> 可以以汇总字段来进行排序。</p> <p>分组示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> cust_name<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>cust_address<span class="token punctuation">)</span> <span class="token keyword">AS</span> addr_num
<span class="token keyword">FROM</span> Customers <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> cust_name<span class="token punctuation">;</span>
</code></pre></div><p>分组后排序示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> cust_name<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>cust_address<span class="token punctuation">)</span> <span class="token keyword">AS</span> addr_num
<span class="token keyword">FROM</span> Customers <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> cust_name
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> cust_name <span class="token keyword">DESC</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="having"><a href="#having" class="header-anchor">#</a> HAVING</h3> <blockquote><p><code>HAVING</code> 用于对汇总的 <code>GROUP BY</code> 结果进行过滤。<code>HAVING</code> 要求存在一个 <code>GROUP BY</code> 子句。</p></blockquote> <p><code>WHERE</code> 和 <code>HAVING</code> 可以在相同的查询中。</p> <p><code>HAVING</code> vs <code>WHERE</code>：</p> <ul><li><code>WHERE</code> 和 <code>HAVING</code> 都是用于过滤。</li> <li><code>HAVING</code> 适用于汇总的组记录；而 <code>WHERE</code> 适用于单个记录。</li></ul> <p>使用 <code>WHERE</code> 和 <code>HAVING</code> 过滤数据示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> cust_name<span class="token punctuation">,</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> num
<span class="token keyword">FROM</span> Customers
<span class="token keyword">WHERE</span> cust_email <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> cust_name
<span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><hr> <p><strong>（以下为 DDL 语句用法）</strong></p> <h2 id="七、数据定义"><a href="#七、数据定义" class="header-anchor">#</a> 七、数据定义</h2> <blockquote><p>DDL 的主要功能是定义数据库对象（如：数据库、数据表、视图、索引等）。</p></blockquote> <h3 id="数据库-database"><a href="#数据库-database" class="header-anchor">#</a> 数据库（DATABASE）</h3> <h4 id="创建数据库"><a href="#创建数据库" class="header-anchor">#</a> 创建数据库</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> test<span class="token punctuation">;</span>
</code></pre></div><h4 id="删除数据库"><a href="#删除数据库" class="header-anchor">#</a> 删除数据库</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> test<span class="token punctuation">;</span>
</code></pre></div><h4 id="选择数据库"><a href="#选择数据库" class="header-anchor">#</a> 选择数据库</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">USE</span> test<span class="token punctuation">;</span>
</code></pre></div><h3 id="数据表-table"><a href="#数据表-table" class="header-anchor">#</a> 数据表（TABLE）</h3> <h4 id="创建数据表"><a href="#创建数据表" class="header-anchor">#</a> 创建数据表</h4> <p><strong>普通创建</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>
  id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'Id'</span><span class="token punctuation">,</span>
  username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'default'</span> <span class="token keyword">COMMENT</span> <span class="token string">'用户名'</span><span class="token punctuation">,</span>
  password <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'default'</span> <span class="token keyword">COMMENT</span> <span class="token string">'密码'</span><span class="token punctuation">,</span>
  email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'default'</span> <span class="token keyword">COMMENT</span> <span class="token string">'邮箱'</span>
<span class="token punctuation">)</span> <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'用户表'</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>根据已有的表创建新表</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> vip_user <span class="token keyword">AS</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="删除数据表"><a href="#删除数据表" class="header-anchor">#</a> 删除数据表</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="修改数据表"><a href="#修改数据表" class="header-anchor">#</a> 修改数据表</h4> <p><strong>添加列</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span>
<span class="token keyword">ADD</span> age <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>删除列</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span>
<span class="token keyword">DROP</span> <span class="token keyword">COLUMN</span> age<span class="token punctuation">;</span>
</code></pre></div><p><strong>修改列</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span>
<span class="token keyword">MODIFY</span> <span class="token keyword">COLUMN</span> age <span class="token keyword">tinyint</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>添加主键</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span>
<span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>删除主键</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span>
<span class="token keyword">DROP</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="视图-view"><a href="#视图-view" class="header-anchor">#</a> 视图（VIEW）</h3> <blockquote><p>视图是基于 SQL 语句的结果集的可视化的表。<strong>视图是虚拟的表，本身不存储数据，也就不能对其进行索引操作</strong>。对视图的操作和对普通表的操作一样。</p></blockquote> <p>视图的作用：</p> <ul><li>简化复杂的 SQL 操作，比如复杂的连接。</li> <li>只使用实际表的一部分数据。</li> <li>通过只给用户访问视图的权限，保证数据的安全性。</li> <li>更改数据格式和表示。</li></ul> <h4 id="创建视图"><a href="#创建视图" class="header-anchor">#</a> 创建视图</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> top_10_user_view <span class="token keyword">AS</span>
<span class="token keyword">SELECT</span> id<span class="token punctuation">,</span> username
<span class="token keyword">FROM</span> <span class="token keyword">user</span>
<span class="token keyword">WHERE</span> id <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="删除视图"><a href="#删除视图" class="header-anchor">#</a> 删除视图</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> top_10_user_view<span class="token punctuation">;</span>
</code></pre></div><h3 id="索引-index"><a href="#索引-index" class="header-anchor">#</a> 索引（INDEX）</h3> <blockquote><p>通过索引可以更加快速高效地查询数据。用户无法看到索引，它们只能被用来加速查询。</p></blockquote> <p>更新一个包含索引的表需要比更新一个没有索引的表花费更多的时间，这是由于索引本身也需要更新。因此，理想的做法是仅仅在常常被搜索的列（以及表）上面创建索引。</p> <p>唯一索引：唯一索引表明此索引的每一个索引值只对应唯一的数据记录。</p> <h4 id="创建索引"><a href="#创建索引" class="header-anchor">#</a> 创建索引</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> user_index
<span class="token keyword">ON</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="创建唯一索引"><a href="#创建唯一索引" class="header-anchor">#</a> 创建唯一索引</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">INDEX</span> user_index
<span class="token keyword">ON</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="删除索引"><a href="#删除索引" class="header-anchor">#</a> 删除索引</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token keyword">user</span>
<span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> user_index<span class="token punctuation">;</span>
</code></pre></div><h3 id="约束"><a href="#约束" class="header-anchor">#</a> 约束</h3> <blockquote><p>SQL 约束用于规定表中的数据规则。</p></blockquote> <ul><li>如果存在违反约束的数据行为，行为会被约束终止。</li> <li>约束可以在创建表时规定（通过 CREATE TABLE 语句），或者在表创建之后规定（通过 ALTER TABLE 语句）。</li> <li>约束类型
<ul><li><code>NOT NULL</code> - 指示某列不能存储 NULL 值。</li> <li><code>UNIQUE</code> - 保证某列的每行必须有唯一的值。</li> <li><code>PRIMARY KEY</code> - NOT NULL 和 UNIQUE 的结合。确保某列（或两个列多个列的结合）有唯一标识，有助于更容易更快速地找到表中的一个特定的记录。</li> <li><code>FOREIGN KEY</code> - 保证一个表中的数据匹配另一个表中的值的参照完整性。</li> <li><code>CHECK</code> - 保证列中的值符合指定的条件。</li> <li><code>DEFAULT</code> - 规定没有给列赋值时的默认值。</li></ul></li></ul> <p>创建表时使用约束条件：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> Users <span class="token punctuation">(</span>
  Id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">UNSIGNED</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'自增Id'</span><span class="token punctuation">,</span>
  Username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">DEFAULT</span> <span class="token string">'default'</span> <span class="token keyword">COMMENT</span> <span class="token string">'用户名'</span><span class="token punctuation">,</span>
  Password <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'default'</span> <span class="token keyword">COMMENT</span> <span class="token string">'密码'</span><span class="token punctuation">,</span>
  Email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'default'</span> <span class="token keyword">COMMENT</span> <span class="token string">'邮箱地址'</span><span class="token punctuation">,</span>
  Enabled <span class="token keyword">TINYINT</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'是否有效'</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>Id<span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">2</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8mb4 <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'用户表'</span><span class="token punctuation">;</span>
</code></pre></div><hr> <p><strong>（以下为 TCL 语句用法）</strong></p> <h2 id="八、事务处理"><a href="#八、事务处理" class="header-anchor">#</a> 八、事务处理</h2> <p>不能回退 <code>SELECT</code> 语句，回退 <code>SELECT</code> 语句也没意义；也不能回退 <code>CREATE</code> 和 <code>DROP</code> 语句。</p> <p><strong>MySQL 默认采用隐式提交策略（<code>autocommit</code>）</strong>，每执行一条语句就把这条语句当成一个事务然后进行提交。当出现 <code>START TRANSACTION</code> 语句时，会关闭隐式提交；当 <code>COMMIT</code> 或 <code>ROLLBACK</code> 语句执行后，事务会自动关闭，重新恢复隐式提交。</p> <p>通过 <code>set autocommit=0</code> 可以取消自动提交，直到 <code>set autocommit=1</code> 才会提交；<code>autocommit</code> 标记是针对每个连接而不是针对服务器的。</p> <p>事务处理指令：</p> <ul><li><code>START TRANSACTION</code> - 指令用于标记事务的起始点。</li> <li><code>SAVEPOINT</code> - 指令用于创建保留点。</li> <li><code>ROLLBACK TO</code> - 指令用于回滚到指定的保留点；如果没有设置保留点，则回退到 <code>START TRANSACTION</code> 语句处。</li> <li><code>COMMIT</code> - 提交事务。</li></ul> <p>事务处理示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 开始事务</span>
<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>

<span class="token comment">-- 插入操作 A</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'root1'</span><span class="token punctuation">,</span> <span class="token string">'root1'</span><span class="token punctuation">,</span> <span class="token string">'xxxx@163.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建保留点 updateA</span>
<span class="token keyword">SAVEPOINT</span> updateA<span class="token punctuation">;</span>

<span class="token comment">-- 插入操作 B</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span>
<span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'root2'</span><span class="token punctuation">,</span> <span class="token string">'root2'</span><span class="token punctuation">,</span> <span class="token string">'xxxx@163.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 回滚到保留点 updateA</span>
<span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> updateA<span class="token punctuation">;</span>

<span class="token comment">-- 提交事务，只有操作 A 生效</span>
<span class="token keyword">COMMIT</span><span class="token punctuation">;</span>
</code></pre></div><hr> <p><strong>（以下为 DCL 语句用法）</strong></p> <h2 id="九、权限控制"><a href="#九、权限控制" class="header-anchor">#</a> 九、权限控制</h2> <p><code>GRANT</code> 和 <code>REVOKE</code> 可在几个层次上控制访问权限：</p> <ul><li>整个服务器，使用 <code>GRANT ALL</code> 和 <code>REVOKE ALL</code>；</li> <li>整个数据库，使用 ON database.*；</li> <li>特定的表，使用 ON database.table；</li> <li>特定的列；</li> <li>特定的存储过程。</li></ul> <p>新创建的账户没有任何权限。</p> <p>账户用 <code>username@host</code> 的形式定义，<code>username@%</code> 使用的是默认主机名。</p> <p>MySQL 的账户信息保存在 mysql 这个数据库中。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">USE</span> mysql<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token keyword">user</span> <span class="token keyword">FROM</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="创建账户"><a href="#创建账户" class="header-anchor">#</a> 创建账户</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> myuser IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'mypassword'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="修改账户名"><a href="#修改账户名" class="header-anchor">#</a> 修改账户名</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> <span class="token keyword">user</span> <span class="token keyword">SET</span> <span class="token keyword">user</span><span class="token operator">=</span><span class="token string">'newuser'</span> <span class="token keyword">WHERE</span> <span class="token keyword">user</span><span class="token operator">=</span><span class="token string">'myuser'</span><span class="token punctuation">;</span>
FLUSH <span class="token keyword">PRIVILEGES</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="删除账户"><a href="#删除账户" class="header-anchor">#</a> 删除账户</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">USER</span> myuser<span class="token punctuation">;</span>
</code></pre></div><h3 id="查看权限"><a href="#查看权限" class="header-anchor">#</a> 查看权限</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> GRANTS <span class="token keyword">FOR</span> myuser<span class="token punctuation">;</span>
</code></pre></div><h3 id="授予权限"><a href="#授予权限" class="header-anchor">#</a> 授予权限</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> myuser<span class="token punctuation">;</span>
</code></pre></div><h3 id="删除权限"><a href="#删除权限" class="header-anchor">#</a> 删除权限</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">REVOKE</span> <span class="token keyword">SELECT</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">FROM</span> myuser<span class="token punctuation">;</span>
</code></pre></div><h3 id="更改密码"><a href="#更改密码" class="header-anchor">#</a> 更改密码</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SET</span> PASSWORD <span class="token keyword">FOR</span> myuser <span class="token operator">=</span> <span class="token string">'mypass'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="十、存储过程和游标"><a href="#十、存储过程和游标" class="header-anchor">#</a> 十、存储过程和游标</h2> <blockquote><p>存储过程可以看成是对一系列 SQL 操作的批处理，保存在数据库中。它就像我们编程语言中的函数一样，封装了我们的代码(PLSQL、T-SQL)。</p></blockquote> <h3 id="存储过程优缺点"><a href="#存储过程优缺点" class="header-anchor">#</a> 存储过程优缺点</h3> <p>存储过程的优点：</p> <ul><li>代码封装，保证了一定的安全性。</li> <li>让编程语言进行调用，提高代码复用。</li> <li>由于是预先编译，因此具有很高的性能。</li> <li>一个存储过程替代大量 T_SQL 语句 ，可以降低网络通信量，提高通信速率。</li></ul> <p>存储过程的缺点：</p> <ul><li>由于不同数据库的存储过程语法几乎都不一样，十分难以维护（不通用）。</li> <li>业务逻辑放在数据库上，难以迭代。</li></ul> <h3 id="使用存储过程"><a href="#使用存储过程" class="header-anchor">#</a> 使用存储过程</h3> <p>创建存储过程的要点：</p> <ul><li>命令行中创建存储过程需要自定义分隔符，因为命令行是以 <code>;</code> 为结束符，而存储过程中也包含了分号，因此会错误把这部分分号当成是结束符，造成语法错误。</li> <li>包含 in、out 和 inout 三种参数。</li> <li>给变量赋值都需要用 select into 语句。</li> <li>每次只能给一个变量赋值，不支持集合的操作。</li></ul> <p>创建存储过程示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">PROCEDURE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">`</span>proc_adder<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DEFINER</span><span class="token operator">=</span><span class="token identifier"><span class="token punctuation">`</span>root<span class="token punctuation">`</span></span><span class="token variable">@`localhost`</span> <span class="token keyword">PROCEDURE</span> <span class="token identifier"><span class="token punctuation">`</span>proc_adder<span class="token punctuation">`</span></span><span class="token punctuation">(</span><span class="token operator">IN</span> a <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token operator">IN</span> b <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">OUT</span> sum <span class="token keyword">int</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
    <span class="token keyword">DECLARE</span> c <span class="token keyword">int</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> a <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token keyword">then</span> <span class="token keyword">set</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> b <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token keyword">then</span> <span class="token keyword">set</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>

    <span class="token keyword">set</span> sum  <span class="token operator">=</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
<span class="token keyword">END</span>
<span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>
</code></pre></div><p>使用存储过程示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">set</span> <span class="token variable">@b</span><span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">call</span> proc_adder<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token variable">@b</span><span class="token punctuation">,</span><span class="token variable">@s</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token variable">@s</span> <span class="token keyword">as</span> sum<span class="token punctuation">;</span>
</code></pre></div><h3 id="游标"><a href="#游标" class="header-anchor">#</a> 游标</h3> <blockquote><p>游标（CURSOR）是一个存储在 DBMS 服务器上的数据库查询，它不是一条 <code>SELECT</code> 语句，而是被该语句检索出来的结果集。在存储过程中使用游标可以对一个结果集进行移动遍历。</p></blockquote> <p>游标主要用于交互式应用，其中用户需要对数据集中的任意行进行浏览和修改。</p> <p>使用游标的四个步骤：</p> <ol><li>声明游标，这个过程没有实际检索出数据；</li> <li>打开游标；</li> <li>取出数据；</li> <li>关闭游标；</li></ol> <p>游标使用示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELIMITER</span> $
<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> getTotal<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">BEGIN</span>
    <span class="token keyword">DECLARE</span> total <span class="token keyword">INT</span><span class="token punctuation">;</span>
    <span class="token comment">-- 创建接收游标数据的变量</span>
    <span class="token keyword">DECLARE</span> sid <span class="token keyword">INT</span><span class="token punctuation">;</span>
    <span class="token keyword">DECLARE</span> sname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">-- 创建总数变量</span>
    <span class="token keyword">DECLARE</span> sage <span class="token keyword">INT</span><span class="token punctuation">;</span>
    <span class="token comment">-- 创建结束标志变量</span>
    <span class="token keyword">DECLARE</span> done <span class="token keyword">INT</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token comment">-- 创建游标</span>
    <span class="token keyword">DECLARE</span> cur <span class="token keyword">CURSOR</span> <span class="token keyword">FOR</span> <span class="token keyword">SELECT</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>age <span class="token keyword">from</span> cursor_table <span class="token keyword">where</span> age<span class="token operator">&gt;</span><span class="token number">30</span><span class="token punctuation">;</span>
    <span class="token comment">-- 指定游标循环结束时的返回值</span>
    <span class="token keyword">DECLARE</span> <span class="token keyword">CONTINUE</span> <span class="token keyword">HANDLER</span> <span class="token keyword">FOR</span> <span class="token operator">NOT</span> FOUND <span class="token keyword">SET</span> done <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">SET</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">OPEN</span> cur<span class="token punctuation">;</span>
    <span class="token keyword">FETCH</span> cur <span class="token keyword">INTO</span> sid<span class="token punctuation">,</span> sname<span class="token punctuation">,</span> sage<span class="token punctuation">;</span>
    <span class="token keyword">WHILE</span><span class="token punctuation">(</span><span class="token operator">NOT</span> done<span class="token punctuation">)</span>
    <span class="token keyword">DO</span>
        <span class="token keyword">SET</span> total <span class="token operator">=</span> total <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">FETCH</span> cur <span class="token keyword">INTO</span> sid<span class="token punctuation">,</span> sname<span class="token punctuation">,</span> sage<span class="token punctuation">;</span>
    <span class="token keyword">END</span> <span class="token keyword">WHILE</span><span class="token punctuation">;</span>

    <span class="token keyword">CLOSE</span> cur<span class="token punctuation">;</span>
    <span class="token keyword">SELECT</span> total<span class="token punctuation">;</span>
<span class="token keyword">END</span> $
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>

<span class="token comment">-- 调用存储过程</span>
<span class="token keyword">call</span> getTotal<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="触发器"><a href="#触发器" class="header-anchor">#</a> 触发器</h3> <blockquote><p>触发器可以视为一种特殊的存储过程。</p> <p>触发器是一种与表操作有关的数据库对象，当触发器所在表上出现指定事件时，将调用该对象，即表的操作事件触发表上的触发器的执行。</p></blockquote> <h4 id="触发器特性"><a href="#触发器特性" class="header-anchor">#</a> 触发器特性</h4> <p>可以使用触发器来进行审计跟踪，把修改记录到另外一张表中。</p> <p>MySQL 不允许在触发器中使用 <code>CALL</code> 语句 ，也就是不能调用存储过程。</p> <p><strong><code>BEGIN</code> 和 <code>END</code></strong></p> <p>当触发器的触发条件满足时，将会执行 <code>BEGIN</code> 和 <code>END</code> 之间的触发器执行动作。</p> <blockquote><p>🔔 注意：在 MySQL 中，分号 <code>;</code> 是语句结束的标识符，遇到分号表示该段语句已经结束，MySQL 可以开始执行了。因此，解释器遇到触发器执行动作中的分号后就开始执行，然后会报错，因为没有找到和 BEGIN 匹配的 END。</p> <p>这时就会用到 <code>DELIMITER</code> 命令（<code>DELIMITER</code> 是定界符，分隔符的意思）。它是一条命令，不需要语句结束标识，语法为：<code>DELIMITER new_delemiter</code>。<code>new_delemiter</code> 可以设为 1 个或多个长度的符号，默认的是分号 <code>;</code>，我们可以把它修改为其他符号，如 <code>$</code> - <code>DELIMITER $</code> 。在这之后的语句，以分号结束，解释器不会有什么反应，只有遇到了 <code>$</code>，才认为是语句结束。注意，使用完之后，我们还应该记得把它给修改回来。</p></blockquote> <p><strong><code>NEW</code> 和 <code>OLD</code></strong></p> <ul><li>MySQL 中定义了 <code>NEW</code> 和 <code>OLD</code> 关键字，用来表示触发器的所在表中，触发了触发器的那一行数据。</li> <li>在 <code>INSERT</code> 型触发器中，<code>NEW</code> 用来表示将要（<code>BEFORE</code>）或已经（<code>AFTER</code>）插入的新数据；</li> <li>在 <code>UPDATE</code> 型触发器中，<code>OLD</code> 用来表示将要或已经被修改的原数据，<code>NEW</code> 用来表示将要或已经修改为的新数据；</li> <li>在 <code>DELETE</code> 型触发器中，<code>OLD</code> 用来表示将要或已经被删除的原数据；</li> <li>使用方法： <code>NEW.columnName</code> （columnName 为相应数据表某一列名）</li></ul> <h4 id="触发器指令"><a href="#触发器指令" class="header-anchor">#</a> 触发器指令</h4> <blockquote><p>提示：为了理解触发器的要点，有必要先了解一下创建触发器的指令。</p></blockquote> <p><code>CREATE TRIGGER</code> 指令用于创建触发器。</p> <p>语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> trigger_name
trigger_time
trigger_event
<span class="token keyword">ON</span> table_name
<span class="token keyword">FOR EACH ROW</span>
<span class="token keyword">BEGIN</span>
  trigger_statements
<span class="token keyword">END</span><span class="token punctuation">;</span>
</code></pre></div><p>说明：</p> <ul><li>trigger_name：触发器名</li> <li>trigger_time: 触发器的触发时机。取值为 <code>BEFORE</code> 或 <code>AFTER</code>。</li> <li>trigger_event: 触发器的监听事件。取值为 <code>INSERT</code>、<code>UPDATE</code> 或 <code>DELETE</code>。</li> <li>table_name: 触发器的监听目标。指定在哪张表上建立触发器。</li> <li>FOR EACH ROW: 行级监视，Mysql 固定写法，其他 DBMS 不同。</li> <li>trigger_statements: 触发器执行动作。是一条或多条 SQL 语句的列表，列表内的每条语句都必须用分号 <code>;</code> 来结尾。</li></ul> <p>创建触发器示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DELIMITER</span> $
<span class="token keyword">CREATE</span> <span class="token keyword">TRIGGER</span> <span class="token identifier"><span class="token punctuation">`</span>trigger_insert_user<span class="token punctuation">`</span></span>
<span class="token keyword">AFTER</span> <span class="token keyword">INSERT</span> <span class="token keyword">ON</span> <span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span>
<span class="token keyword">FOR EACH ROW</span>
<span class="token keyword">BEGIN</span>
    <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>user_history<span class="token punctuation">`</span></span><span class="token punctuation">(</span>user_id<span class="token punctuation">,</span> operate_type<span class="token punctuation">,</span> operate_time<span class="token punctuation">)</span>
    <span class="token keyword">VALUES</span> <span class="token punctuation">(</span>NEW<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token string">'add a user'</span><span class="token punctuation">,</span>  <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">END</span> $
<span class="token keyword">DELIMITER</span> <span class="token punctuation">;</span>
</code></pre></div><p>查看触发器示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> TRIGGERS<span class="token punctuation">;</span>
</code></pre></div><p>删除触发器示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TRIGGER</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> trigger_insert_user<span class="token punctuation">;</span>
</code></pre></div><h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <ul><li><a href="https://item.jd.com/11232698.html" target="_blank" rel="noopener noreferrer">《SQL 必知必会》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://draveness.me/mysql-transaction" target="_blank" rel="noopener noreferrer">『浅入深出』MySQL 中事务的实现<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/CraryPrimitiveMan/p/4206942.html" target="_blank" rel="noopener noreferrer">MySQL 的学习--触发器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh.wikipedia.org/wiki/SQL" target="_blank" rel="noopener noreferrer">维基百科词条 - SQL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.sitesbay.com/sql/index" target="_blank" rel="noopener noreferrer">https://www.sitesbay.com/sql/index<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.w3resource.com/sql/subqueries/understanding-sql-subqueries.php" target="_blank" rel="noopener noreferrer">SQL Subqueries<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://stackoverflow.com/questions/6294778/mysql-quick-breakdown-of-the-types-of-joins" target="_blank" rel="noopener noreferrer">Quick breakdown of the types of joins<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.w3resource.com/sql/sql-union.php" target="_blank" rel="noopener noreferrer">SQL UNION<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.w3resource.com/sql/database-security/create-users.php" target="_blank" rel="noopener noreferrer">SQL database security<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.cnblogs.com/chenpi/p/5136483.html" target="_blank" rel="noopener noreferrer">Mysql 中的存储过程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <div class="page-slot page-slot-bottom">
  <div class="wwads-cn wwads-horizontal pageB" data-id="136" style="width:100%;max-height:80px;min-height:auto;"></div>
  <style>
    .pageB img{width:80px!important;}
    .wwads-horizontal .wwads-text, .wwads-content .wwads-text{line-height:1;}
  </style>
  </div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/db-tutorial/edit/master/docs/12.数据库/03.关系型数据库/01.综合/02.SqlCheatSheet.md" target="_blank" rel="noopener noreferrer">📝 帮助改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/db-tutorial/tags/?tag=%E6%95%B0%E6%8D%AE%E5%BA%93" title="标签">#数据库</a><a href="/db-tutorial/tags/?tag=%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93" title="标签">#关系型数据库</a><a href="/db-tutorial/tags/?tag=SQL" title="标签">#SQL</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2023/02/10, 11:43:21</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/db-tutorial/pages/9bb28f/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">关系型数据库面试</div></a> <a href="/db-tutorial/pages/55e9a7/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">扩展 SQL</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/db-tutorial/pages/9bb28f/" class="prev">关系型数据库面试</a></span> <span class="next"><a href="/db-tutorial/pages/55e9a7/">扩展 SQL</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/db-tutorial/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/db-tutorial/pages/d1bae4/"><div>
            Elasticsearch 映射
            <!----></div></a> <span class="date">05-16</span></dt></dl><dl><dd>02</dd> <dt><a href="/db-tutorial/pages/3c3c45/"><div>
            数据库综合
            <!----></div></a> <span class="date">04-11</span></dt></dl><dl><dd>03</dd> <dt><a href="/db-tutorial/pages/addb05/"><div>
            数据库中间件和代理
            <!----></div></a> <span class="date">04-11</span></dt></dl> <dl><dd></dd> <dt><a href="/db-tutorial/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:forbreak@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/dunwu" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2023
    <span>钝悟（dunwu） | CC-BY-SA-4.0</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div>
    <div class="wwads-cn wwads-vertical windowRB" data-id="136" style="max-width:160px;
    min-width: auto;min-height:auto;"></div>
    <style>
      .windowRB{ padding: 0;}
      .windowRB .wwads-img{margin-top: 10px;}
      .windowRB .wwads-content{margin: 0 10px 10px 10px;}
      .custom-html-window-rb .close-but{
        display: none;
      }
    </style>
  </div></div></div></div><div class="global-ui"><div></div></div></div>
    <script src="/db-tutorial/assets/js/app.1598b197.js" defer></script><script src="/db-tutorial/assets/js/2.cc645ea8.js" defer></script><script src="/db-tutorial/assets/js/13.4aa0bc50.js" defer></script>
  </body>
</html>
